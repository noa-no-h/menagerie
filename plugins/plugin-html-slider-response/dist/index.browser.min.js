var jsPsychHtmlSliderResponse=function(r){"use strict";var m="2.1.0";const y={name:"html-slider-response",version:m,parameters:{stimulus:{type:r.ParameterType.HTML_STRING,default:void 0},min:{type:r.ParameterType.INT,default:0},max:{type:r.ParameterType.INT,default:100},slider_start:{type:r.ParameterType.INT,default:50},step:{type:r.ParameterType.INT,default:1},labels:{type:r.ParameterType.HTML_STRING,default:[],array:!0},slider_width:{type:r.ParameterType.INT,default:null},button_label:{type:r.ParameterType.STRING,default:"Continue",array:!1},require_movement:{type:r.ParameterType.BOOL,default:!1},prompt:{type:r.ParameterType.HTML_STRING,default:null},stimulus_duration:{type:r.ParameterType.INT,default:null},trial_duration:{type:r.ParameterType.INT,default:null},response_ends_trial:{type:r.ParameterType.BOOL,default:!0}},data:{rt:{type:r.ParameterType.INT},response:{type:r.ParameterType.INT},stimulus:{type:r.ParameterType.HTML_STRING},slider_start:{type:r.ParameterType.INT}},citations:{apa:"",bibtex:""}};class o{constructor(s){this.jsPsych=s}trial(s,e){var i=7.5,t='<div id="jspsych-html-slider-response-wrapper" style="margin: 100px 0px;">';t+='<div id="jspsych-html-slider-response-stimulus">'+e.stimulus+"</div>",t+='<div class="jspsych-html-slider-response-container" style="position:relative; margin: 0 auto 3em auto; ',e.slider_width!==null?t+="width:"+e.slider_width+"px;":t+="width:auto;",t+='">',t+='<input type="range" class="jspsych-slider" value="'+e.slider_start+'" min="'+e.min+'" max="'+e.max+'" step="'+e.step+'" id="jspsych-html-slider-response-response"></input>',t+="<div>";for(var a=0;a<e.labels.length;a++){var n=100/(e.labels.length-1),p=a*(100/(e.labels.length-1)),c=(p-50)/50*100,h=c*i/100;t+='<div style="border: 1px solid transparent; display: inline-block; position: absolute; left:calc('+p+"% - ("+n+"% / 2) - "+h+"px); text-align: center; width: "+n+'%;">',t+='<span style="text-align: center; font-size: 80%;">'+e.labels[a]+"</span>",t+="</div>"}t+="</div>",t+="</div>",t+="</div>",e.prompt!==null&&(t+=e.prompt),t+='<button id="jspsych-html-slider-response-next" class="jspsych-btn" '+(e.require_movement?"disabled":"")+">"+e.button_label+"</button>",s.innerHTML=t;var u={rt:null,response:null};if(e.require_movement){const l=()=>{s.querySelector("#jspsych-html-slider-response-next").disabled=!1};s.querySelector("#jspsych-html-slider-response-response").addEventListener("mousedown",l),s.querySelector("#jspsych-html-slider-response-response").addEventListener("touchstart",l),s.querySelector("#jspsych-html-slider-response-response").addEventListener("change",l)}const d=()=>{var l={rt:u.rt,stimulus:e.stimulus,slider_start:e.slider_start,response:u.response};this.jsPsych.finishTrial(l)};s.querySelector("#jspsych-html-slider-response-next").addEventListener("click",()=>{var l=performance.now();u.rt=Math.round(l-T),u.response=s.querySelector("#jspsych-html-slider-response-response").valueAsNumber,e.response_ends_trial?d():s.querySelector("#jspsych-html-slider-response-next").disabled=!0}),e.stimulus_duration!==null&&this.jsPsych.pluginAPI.setTimeout(()=>{s.querySelector("#jspsych-html-slider-response-stimulus").style.visibility="hidden"},e.stimulus_duration),e.trial_duration!==null&&this.jsPsych.pluginAPI.setTimeout(d,e.trial_duration);var T=performance.now()}simulate(s,e,i,t){e=="data-only"&&(t(),this.simulate_data_only(s,i)),e=="visual"&&this.simulate_visual(s,i,t)}create_simulation_data(s,e){const i={stimulus:s.stimulus,slider_start:s.slider_start,response:this.jsPsych.randomization.randomInt(s.min,s.max),rt:this.jsPsych.randomization.sampleExGaussian(500,50,.006666666666666667,!0)},t=this.jsPsych.pluginAPI.mergeSimulationData(i,e);return this.jsPsych.pluginAPI.ensureSimulationDataConsistency(s,t),t}simulate_data_only(s,e){const i=this.create_simulation_data(s,e);this.jsPsych.finishTrial(i)}simulate_visual(s,e,i){const t=this.create_simulation_data(s,e),a=this.jsPsych.getDisplayElement();if(this.trial(a,s),i(),t.rt!==null){const n=a.querySelector("input[type='range']");setTimeout(()=>{this.jsPsych.pluginAPI.clickTarget(n),n.valueAsNumber=t.response},t.rt/2),this.jsPsych.pluginAPI.clickTarget(a.querySelector("button"),t.rt)}}}return o.info=y,o}(jsPsychModule);
//# sourceMappingURL=index.browser.min.js.map
